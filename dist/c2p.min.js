!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).c2p=t()}(this,(function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}
/**
   * callback-promise
   *
   * Convert callback style APIs to Promise based APIs.
   *
   * Usage:
   *      c2p(fs.readFile, 1, 0)(filename)
   *          .then(function (data) { })
   *          .catch(function (error) { })
   *
   *      c2p(chrome.tabs, 'update')(tabId, props)
   *         .then(function (tab) {})
   *         .catch(function (error) {})
   *
   *
   *   @license MIT
   *   @version 0.4.1
   *   @repo    https://github.com/duzun/callback-promise
   *   @author  Dumitru Uzun (DUzun.Me)
   */var t="undefined"!=typeof Promise?Promise:void 0,o={}.hasOwnProperty,e=[],r=e.unshift,i=e.push,u=e.slice;function f(n,o,e,l,p,y){var s,a;return c(n)?(y=p,p=l,l=e,e=o,o=n,n=void 0):c(o)||(o=n[o]),!0===e&&null==p&&(p=e,e=void 0,!0===l&&null==y&&(y=l,l=void 0)),!1===e?s=function(n,t){t(n)}:c(e)?s=function(t,o,r,i){o(e.apply(n||i,t))}:(e=+e||0,s=function(n,t){t(n[e])}),null!=l&&(l=+l||0,a=function(n){var t=n[l];if(null!=t)throw t}),function e(l){var d,m=arguments,v=e.Promise||f.Promise||t,h=n||this,b=new v((function(n,t){var e,f=function(){try{var o=u.call(arguments);a&&a(o),e&&e.apply(this,o),s(o,n,b,h)}catch(n){t(n)}};if(!y){var l=p?0:m.length-1;c(e=m[l])?m[l]=f:e=void 0}e||(p?r:i).call(m,f),d=o.apply(h,m)}));return null!=d&&(b.result=d),b}}function c(n){return"function"==typeof n}return(f.all=function(t,e,r,i,u,l){for(var p in"object"!=n(e)&&(l=u,u=i,i=r,r=e,e={}),t)o.call(t,p)&&c(t[p])&&(e[p]=f(t[p],r,i,u,l));return e},f.p2c=function(n,t){return t&&n.then((function(n){return t(void 0,n)}),t),n},f.Promise=t,f.val=function(n){return function(){return n}},f)}));
